#!/usr/bin/python3

import sqlite3

class _Test_():
    def __init__(self):
        self.pwd      = os.getcwd() + '/'
        self.gün      = datetime.datetime.now().day
        self.ay       = datetime.datetime.now().month
        self.yıl      = datetime.datetime.now().year

        self.db       = sqlite3.connect(f'{str(self.pwd)}database.db3')
        self.dbm      = self.db.cursor()

        # Önceden bir kereliğine tarih veritabanına girilir.
        self.tarih = self.dbm.execute(f"""SELECT * FROM tarih""")
        self.record = self.tarih.fetchall()
        
        for row in self.record:
            if int(self.gün) != int(row[0]):
                self.dbm.execute("DELETE FROM tarih WHERE gün = ?",(f'{int(row[0])}',))
                self.db.commit()
                self.dbm.execute(f"""INSERT INTO tarih VALUES ("{int(self.gün)}", "{int(self.ay)}", "{int(self.yıl)}")""")
                # Her yeni günde yapılacak işleri yaptır.
                self.response = requests.get(f'{self.usom}',verify=False)
                self.dsy      = open(f'{str(self.pwd)}usom.txt','w')
                self.dsy.write(str(self.response.content))
                self.dsy.close()
            
            self.db.commit()
        
        self.usomcheck = open(f'{str(self.pwd)}usom.txt','r')
        self.usomicrk  = self.usomcheck.read()
        self.usomcheck.close()


if __name__ == "__main__":
    l = _Test_()
    